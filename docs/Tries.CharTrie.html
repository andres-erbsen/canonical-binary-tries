
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Tries.CharTrie</title>
<meta name="description" content="Documentation of Coq module Tries.CharTrie" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Tries.CharTrie</h1>
<div class="coq">
<h1> Dictionaries implemented as character-based tries </h1>
<br/>
<br/>
<span class="id">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.Ascii.html">Ascii</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html">OrderedType</a></span>.<br/>
<span class="id">From</span> <span class="id">Tries</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">AsciiOrder</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="AO">AO</a></span> := <span class="id">OrderedAscii</span>.<br/>
<span class="kwd">Module</span> <span class="id"><a name="AOF">AOF</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#OrderedTypeFacts">OrderedTypeFacts</a></span> <span class="id"><a href="Tries.CharTrie.html#AO">AO</a></span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">inv</span> <span class="id">H</span> := <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="Stringmap">Stringmap</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="Stringmap.Raw">Raw</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Stringmap.Raw.STRINGMAP">STRINGMAP</a></span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">A</span>: <span class="kwd">Type</span>}.<br/>
<br/>
<h2> Representation of tries </h2>
<br/>
<div class="doc">The data structure is a trie where each node carries a mapping from
    characters (Coq type <span class="bracket"><span class="id">ascii</span></span>) to subtrees.  In other words, this is
    a trie with a branching factor of 256 at each node.
    The mapping from characters to subtrees is represented sparsely
    as a sorted association list, with type <span class="bracket"><span class="id">forest</span></span> below. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="Stringmap.Raw.tree">tree</a></span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="Stringmap.Raw.Empty">Empty</a></span>: <span class="id">tree</span><br/>
&nbsp;&nbsp;| <span class="id"><a name="Stringmap.Raw.Node">Node</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.STRINGMAP.A">A</a></span> -&gt; <span class="id">forest</span> -&gt; <span class="id">tree</span><br/>
<span class="kwd">with</span> <span class="id"><a name="Stringmap.Raw.forest">forest</a></span> : <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="Stringmap.Raw.Nil">Nil</a></span> : <span class="id">forest</span><br/>
&nbsp;&nbsp;| <span class="id"><a name="Stringmap.Raw.Cons">Cons</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.Ascii.html#ascii">ascii</a></span> -&gt; <span class="id">tree</span> -&gt; <span class="id">forest</span> -&gt; <span class="id">forest</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Stringmap.Raw.In_forest">In_forest</a></span> (<span class="id">x</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.Ascii.html#ascii">ascii</a></span>) (<span class="id">f</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.forest">forest</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">f</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Nil">Nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">k</span> <span class="id">t</span> <span class="id">f</span> =&gt; <span class="id">x</span> = <span class="id">k</span> \/ <span class="id">In_forest</span> <span class="id">x</span> <span class="id">f</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">The well-formedness invariant states that the association lists
    are sorted, i.e. characters occur in increasing order. </div>
<br/>
<span class="kwd">Inductive</span> <span class="kwd">wf</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.tree">tree</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="Stringmap.Raw.wf_Empty">wf_Empty</a></span>: <span class="kwd">wf</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Empty">Empty</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="Stringmap.Raw.wf_Node">wf_Node</a></span>: <span class="kwd">forall</span> <span class="id">ov</span> <span class="id">f</span>, <span class="id">wff</span> <span class="id">f</span> -&gt; <span class="kwd">wf</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Node">Node</a></span> <span class="id">ov</span> <span class="id">f</span>)<br/>
<span class="kwd">with</span> <span class="id"><a name="Stringmap.Raw.wff">wff</a></span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.forest">forest</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="Stringmap.Raw.wff_Nil">wff_Nil</a></span>: <span class="id">wff</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Nil">Nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="Stringmap.Raw.wff_Cons">wff_Cons</a></span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">t</span> <span class="id">f</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">wf</span> <span class="id">t</span> -&gt; <span class="id">wff</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.In_forest">In_forest</a></span> <span class="id">x</span> <span class="id">f</span> -&gt; <span class="id"><a href="Tries.CharTrie.html#AO.lt">AO.lt</a></span> <span class="id">k</span> <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wff</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">k</span> <span class="id">t</span> <span class="id">f</span>).<br/>
<br/>
<h2> Basic operations: <span class="bracket"><span class="id">empty</span></span>, <span class="bracket"><span class="id">get</span></span>, <span class="bracket"><span class="tactic">set</span></span>, <span class="bracket"><span class="id">remove</span></span> </h2>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Stringmap.Raw.get">get</a></span> (<span class="id">s</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">m</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.tree">tree</a></span>) {<span class="kwd">struct</span> <span class="id">m</span>} : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.STRINGMAP.A">A</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">m</span>, <span class="id">s</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Empty">Empty</a></span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Node">Node</a></span> <span class="id">v</span> <span class="id">_</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#EmptyString">EmptyString</a></span> =&gt; <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Node">Node</a></span> <span class="id">_</span> <span class="id">cl</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#String">String</a></span> <span class="id">x</span> <span class="id">s</span> =&gt; <span class="id">getf</span> <span class="id">x</span> <span class="id">s</span> <span class="id">cl</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
<span class="kwd">with</span> <span class="id"><a name="Stringmap.Raw.getf">getf</a></span> (<span class="id">x</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.Ascii.html#ascii">ascii</a></span>) (<span class="id">s</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">f</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.forest">forest</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.STRINGMAP.A">A</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">f</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Nil">Nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">k</span> <span class="id">t</span> <span class="id">f</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span> <span class="id">k</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#LT">LT</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#EQ">EQ</a></span> <span class="id">_</span> =&gt; <span class="id">get</span> <span class="id">s</span> <span class="id">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#GT">GT</a></span> <span class="id">_</span> =&gt; <span class="id">getf</span> <span class="id">x</span> <span class="id">s</span> <span class="id">f</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Stringmap.Raw.singleton">singleton</a></span> (<span class="id">s</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">v</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.STRINGMAP.A">A</a></span>) : <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.tree">tree</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">s</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#EmptyString">EmptyString</a></span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Node">Node</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>) <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Nil">Nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#String">String</a></span> <span class="id">x</span> <span class="id">s</span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Node">Node</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">x</span> (<span class="id">singleton</span> <span class="id">s</span> <span class="id">v</span>) <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Nil">Nil</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="tactic">set</span> (<span class="id">s</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">v</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.STRINGMAP.A">A</a></span>) (<span class="id">m</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.tree">tree</a></span>) {<span class="kwd">struct</span> <span class="id">m</span>} : <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.tree">tree</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">m</span>, <span class="id">s</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Empty">Empty</a></span>, <span class="id">_</span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.singleton">singleton</a></span> <span class="id">s</span> <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Node">Node</a></span> <span class="id">_</span> <span class="id">cl</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#EmptyString">EmptyString</a></span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Node">Node</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>) <span class="id">cl</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Node">Node</a></span> <span class="id">v0</span> <span class="id">cl</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#String">String</a></span> <span class="id">x</span> <span class="id">s</span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Node">Node</a></span> <span class="id">v0</span> (<span class="id">setf</span> <span class="id">x</span> <span class="id">s</span> <span class="id">v</span> <span class="id">cl</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
<span class="kwd">with</span> <span class="id"><a name="Stringmap.Raw.setf">setf</a></span> (<span class="id">x</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.Ascii.html#ascii">ascii</a></span>) (<span class="id">s</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">v</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.STRINGMAP.A">A</a></span>) (<span class="id">f</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.forest">forest</a></span>) {<span class="kwd">struct</span> <span class="id">f</span>} : <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.forest">forest</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">f</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Nil">Nil</a></span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">x</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.singleton">singleton</a></span> <span class="id">s</span> <span class="id">v</span>) <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Nil">Nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">k</span> <span class="id">c</span> <span class="id">f</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span> <span class="id">k</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#LT">LT</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">x</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.singleton">singleton</a></span> <span class="id">s</span> <span class="id">v</span>) <span class="id">f</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#EQ">EQ</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">k</span> (<span class="tactic">set</span> <span class="id">s</span> <span class="id">v</span> <span class="id">c</span>) <span class="id">f</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#GT">GT</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">k</span> <span class="id">c</span> (<span class="id">setf</span> <span class="id">x</span> <span class="id">s</span> <span class="id">v</span> <span class="id">f</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Smart constructors for <span class="bracket"><span class="id">Node</span></span> and <span class="bracket"><span class="id">Cons</span></span> that avoid the creation
    of trivially empty trees or forests. </div>
<br/>
<span class="kwd">Definition</span> <span class="id">Node</span>' (<span class="id">ov</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.STRINGMAP.A">A</a></span>) (<span class="id">f</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.forest">forest</a></span>) : <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.tree">tree</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">ov</span>, <span class="id">f</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Nil">Nil</a></span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Empty">Empty</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Node">Node</a></span> <span class="id">ov</span> <span class="id">f</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">Cons</span>' (<span class="id">x</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.Ascii.html#ascii">ascii</a></span>) (<span class="id">t</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.tree">tree</a></span>) (<span class="id">f</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.forest">forest</a></span>) : <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.forest">forest</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">t</span> <span class="kwd">with</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Empty">Empty</a></span> =&gt; <span class="id">f</span> | <span class="id">_</span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">x</span> <span class="id">t</span> <span class="id">f</span> <span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Stringmap.Raw.remove">remove</a></span> (<span class="id">s</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">m</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.tree">tree</a></span>) {<span class="kwd">struct</span> <span class="id">m</span>} : <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.tree">tree</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">m</span>, <span class="id">s</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Empty">Empty</a></span>, <span class="id">_</span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Empty">Empty</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Node">Node</a></span> <span class="id">_</span> <span class="id">cl</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#EmptyString">EmptyString</a></span> =&gt; <span class="id">Node</span>' <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">cl</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Node">Node</a></span> <span class="id">v0</span> <span class="id">cl</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#String">String</a></span> <span class="id">x</span> <span class="id">s</span> =&gt; <span class="id">Node</span>' <span class="id">v0</span> (<span class="id">removef</span> <span class="id">x</span> <span class="id">s</span> <span class="id">cl</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
<span class="kwd">with</span> <span class="id"><a name="Stringmap.Raw.removef">removef</a></span> (<span class="id">x</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.Ascii.html#ascii">ascii</a></span>) (<span class="id">s</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">f</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.forest">forest</a></span>) {<span class="kwd">struct</span> <span class="id">f</span>} : <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.forest">forest</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">f</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Nil">Nil</a></span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Nil">Nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">k</span> <span class="id">c</span> <span class="id">f</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span> <span class="id">k</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#LT">LT</a></span> <span class="id">_</span> =&gt; <span class="id">f</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#EQ">EQ</a></span> <span class="id">_</span> =&gt; <span class="id">Cons</span>' <span class="id">k</span> (<span class="id">remove</span> <span class="id">s</span> <span class="id">c</span>) <span class="id">f</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#GT">GT</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">k</span> <span class="id">c</span> (<span class="id">removef</span> <span class="id">x</span> <span class="id">s</span> <span class="id">f</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<h2> Well-formedness properties for the basic operations </h2>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Stringmap.Raw.getf_In">getf_In</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">s</span> <span class="id">v</span> <span class="id">f</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf">getf</a></span> <span class="id">x</span> <span class="id">s</span> <span class="id">f</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> -&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.In_forest">In_forest</a></span> <span class="id">x</span> <span class="id">f</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">f</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">discriminate</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span> <span class="id">a</span>).<br/>
+ <span class="tactic">discriminate</span>.<br/>
+ <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e</span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Stringmap.Raw.getf_notIn">getf_notIn</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">s</span> <span class="id">f</span>, ~(<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.In_forest">In_forest</a></span> <span class="id">x</span> <span class="id">f</span>) -&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf">getf</a></span> <span class="id">x</span> <span class="id">s</span> <span class="id">f</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf">getf</a></span> <span class="id">x</span> <span class="id">s</span> <span class="id">f</span>) <span class="kwd">as</span> [<span class="id">v</span>|] <span class="id">eqn</span>:<span class="id">G</span>; <span class="tactic">auto</span>. <span class="tactic">elim</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf_In">getf_In</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Stringmap.Raw.wf_singleton">wf_singleton</a></span>: <span class="kwd">forall</span> <span class="id">v</span> <span class="id">s</span>, <span class="kwd">wf</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.singleton">singleton</a></span> <span class="id">s</span> <span class="id">v</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s</span> <span class="kwd">as</span> [ | <span class="id">x</span> <span class="id">s</span>]; <span class="tactic">simpl</span>.<br/>
- <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
- <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">simpl</span>; <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Stringmap.Raw.In_setf">In_setf</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">x</span> <span class="id">s</span> <span class="id">v</span> <span class="id">f</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.In_forest">In_forest</a></span> <span class="id">k</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.setf">setf</a></span> <span class="id">x</span> <span class="id">s</span> <span class="id">v</span> <span class="id">f</span>) &lt;-&gt; <span class="id">k</span> = <span class="id">x</span> \/ <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.In_forest">In_forest</a></span> <span class="id">k</span> <span class="id">f</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">f</span>; <span class="tactic">simpl</span>.<br/>
- <span class="tactic">tauto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span> <span class="id">a</span>); <span class="tactic">simpl</span>.<br/>
+ <span class="tactic">tauto</span>.<br/>
+ <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e</span>; <span class="tactic">subst</span> <span class="id">x</span>. <span class="tactic">tauto</span>.<br/>
+ <span class="tactic">rewrite</span> <span class="id">IHf</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Stringmap.Raw.wf_set">wf_set</a></span>: <span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">wf</span> <span class="id">m</span> -&gt; <span class="kwd">forall</span> <span class="id">s</span> <span class="id">v</span>, <span class="kwd">wf</span> (<span class="tactic">set</span> <span class="id">s</span> <span class="id">v</span> <span class="id">m</span>)<br/>
<span class="kwd">with</span> <span class="id"><a name="Stringmap.Raw.wf_setf">wf_setf</a></span>: <span class="kwd">forall</span> <span class="id">f</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wff">wff</a></span> <span class="id">f</span> -&gt; <span class="kwd">forall</span> <span class="id">x</span> <span class="id">s</span> <span class="id">v</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wff">wff</a></span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.setf">setf</a></span> <span class="id">x</span> <span class="id">s</span> <span class="id">v</span> <span class="id">f</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</div>
<div class="proofscript" id="proof35">
- <span class="tactic">destruct</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
+ <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wf_singleton">wf_singleton</a></span>.<br/>
+ <span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [ | <span class="id">x</span> <span class="id">s</span>]. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">apply</span> <span class="id">wf_setf</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
+ <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wf_singleton">wf_singleton</a></span>. <span class="tactic">simpl</span>; <span class="tactic">tauto</span>.<br/>
+ <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span> <span class="id">k</span>).<br/>
* <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wf_singleton">wf_singleton</a></span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">y</span> [<span class="id">E</span>|<span class="id">E</span>]. <span class="tactic">subst</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Tries.CharTrie.html#AO.lt_trans">AO.lt_trans</a></span>; <span class="tactic">eauto</span>.<br/>
* <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id">wf_set</span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
* <span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">wf_setf</span>; <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">y</span> <span class="id">I</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.In_setf">In_setf</a></span> <span class="kwd">in</span> <span class="id">I</span>; <span class="tactic">destruct</span> <span class="id">I</span> <span class="kwd">as</span> [<span class="id">I</span>|<span class="id">I</span>].<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">wf_Node</span>': <span class="kwd">forall</span> <span class="id">ov</span> <span class="id">f</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wff">wff</a></span> <span class="id">f</span> -&gt; <span class="kwd">wf</span> (<span class="id">Node</span>' <span class="id">ov</span> <span class="id">f</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">Node</span>'; <span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">ov</span>, <span class="id">f</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">get_Node</span>': <span class="kwd">forall</span> <span class="id">s</span> <span class="id">ov</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.get">get</a></span> <span class="id">s</span> (<span class="id">Node</span>' <span class="id">ov</span> <span class="id">f</span>) = <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.get">get</a></span> <span class="id">s</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Node">Node</a></span> <span class="id">ov</span> <span class="id">f</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id">Node</span>'; <span class="tactic">destruct</span> <span class="id">ov</span>, <span class="id">f</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">wf_Cons</span>': <span class="kwd">forall</span> <span class="id">k</span> <span class="id">t</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wff">wff</a></span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">k</span> <span class="id">t</span> <span class="id">f</span>) -&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wff">wff</a></span> (<span class="id">Cons</span>' <span class="id">k</span> <span class="id">t</span> <span class="id">f</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">Cons</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">In_Cons</span>': <span class="kwd">forall</span> <span class="id">x</span> <span class="id">k</span> <span class="id">t</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.In_forest">In_forest</a></span> <span class="id">x</span> (<span class="id">Cons</span>' <span class="id">k</span> <span class="id">t</span> <span class="id">f</span>) -&gt; <span class="id">x</span> = <span class="id">k</span> \/ <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.In_forest">In_forest</a></span> <span class="id">x</span> <span class="id">f</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">Cons</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">getf_Cons</span>': <span class="kwd">forall</span> <span class="id">x</span> <span class="id">s</span> <span class="id">k</span> <span class="id">t</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wff">wff</a></span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">k</span> <span class="id">t</span> <span class="id">f</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf">getf</a></span> <span class="id">x</span> <span class="id">s</span> (<span class="id">Cons</span>' <span class="id">k</span> <span class="id">t</span> <span class="id">f</span>) = <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf">getf</a></span> <span class="id">x</span> <span class="id">s</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.Cons">Cons</a></span> <span class="id">k</span> <span class="id">t</span> <span class="id">f</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">Cons</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">P</span>: ~<span class="id"><a href="Tries.CharTrie.html#AO.lt">AO.lt</a></span> <span class="id">k</span> <span class="id">x</span> -&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf">getf</a></span> <span class="id">x</span> <span class="id">s</span> <span class="id">f</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf_notIn">getf_notIn</a></span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span> <span class="id">k</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">P</span>. <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#AOF.lt_not_gt">AOF.lt_not_gt</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">P</span>. <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#AOF.eq_not_gt">AOF.eq_not_gt</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Stringmap.Raw.In_removef">In_removef</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">x</span> <span class="id">s</span> <span class="id">f</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.In_forest">In_forest</a></span> <span class="id">k</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.removef">removef</a></span> <span class="id">x</span> <span class="id">s</span> <span class="id">f</span>) -&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.In_forest">In_forest</a></span> <span class="id">k</span> <span class="id">f</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">f</span>; <span class="tactic">simpl</span>.<br/>
- <span class="tactic">tauto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span> <span class="id">a</span>); <span class="tactic">simpl</span>.<br/>
+ <span class="tactic">tauto</span>.<br/>
+ <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e</span>; <span class="tactic">subst</span> <span class="id">x</span>. <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">In_Cons</span>'; <span class="tactic">eauto</span>.<br/>
+ <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Stringmap.Raw.wf_remove">wf_remove</a></span>: <span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">wf</span> <span class="id">m</span> -&gt; <span class="kwd">forall</span> <span class="id">s</span>, <span class="kwd">wf</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.remove">remove</a></span> <span class="id">s</span> <span class="id">m</span>)<br/>
<span class="kwd">with</span> <span class="id"><a name="Stringmap.Raw.wf_removef">wf_removef</a></span>: <span class="kwd">forall</span> <span class="id">f</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wff">wff</a></span> <span class="id">f</span> -&gt; <span class="kwd">forall</span> <span class="id">x</span> <span class="id">s</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wff">wff</a></span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.removef">removef</a></span> <span class="id">x</span> <span class="id">s</span> <span class="id">f</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</div>
<div class="proofscript" id="proof42">
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id">Node</span>'.<br/>
- <span class="tactic">destruct</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
+ <span class="id">constructor</span>.<br/>
+ <span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [ | <span class="id">x</span> <span class="id">s</span>]; <span class="tactic">apply</span> <span class="id">wf_Node</span>'; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
+ <span class="id">constructor</span>.<br/>
+ <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span> <span class="id">k</span>).<br/>
* <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
* <span class="tactic">apply</span> <span class="id">wf_Cons</span>'. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
* <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">eapply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.In_removef">In_removef</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h2> Good variable properties for the basic operations </h2>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Stringmap.Raw.gsings">gsings</a></span>: <span class="kwd">forall</span> <span class="id">v</span> <span class="id">s</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.get">get</a></span> <span class="id">s</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.singleton">singleton</a></span> <span class="id">s</span> <span class="id">v</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s</span> <span class="kwd">as</span> [ | <span class="id">x</span> <span class="id">s</span>]; <span class="tactic">simpl</span>. <br/>
- <span class="tactic">auto</span>.<br/>
- <span class="id">AOF.elim_comp_eq</span> <span class="id">x</span> <span class="id">x</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Stringmap.Raw.gsingo">gsingo</a></span>: <span class="kwd">forall</span> <span class="id">v</span> <span class="id">s</span> <span class="id">s</span>', <span class="id">s</span>' &lt;&gt; <span class="id">s</span> -&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.get">get</a></span> <span class="id">s</span>' (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.singleton">singleton</a></span> <span class="id">s</span> <span class="id">v</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s</span> <span class="kwd">as</span> [ | <span class="id">x</span> <span class="id">s</span>]; <span class="tactic">destruct</span> <span class="id">s</span>' <span class="kwd">as</span> [ | <span class="id">x</span>' <span class="id">s</span>']; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
- <span class="tactic">congruence</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span>' <span class="id">x</span>); <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHs</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Stringmap.Raw.gss">gss</a></span>: <span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">wf</span> <span class="id">m</span> -&gt; <span class="kwd">forall</span> <span class="id">v</span> <span class="id">s</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.get">get</a></span> <span class="id">s</span> (<span class="tactic">set</span> <span class="id">s</span> <span class="id">v</span> <span class="id">m</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span><br/>
<span class="kwd">with</span> <span class="id"><a name="Stringmap.Raw.gssf">gssf</a></span>: <span class="kwd">forall</span> <span class="id">f</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wff">wff</a></span> <span class="id">f</span> -&gt; <span class="kwd">forall</span> <span class="id">x</span> <span class="id">s</span> <span class="id">v</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf">getf</a></span> <span class="id">x</span> <span class="id">s</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.setf">setf</a></span> <span class="id">x</span> <span class="id">s</span> <span class="id">v</span> <span class="id">f</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</div>
<div class="proofscript" id="proof45">
- <span class="tactic">destruct</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
+ <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.gsings">gsings</a></span>.<br/>
+ <span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [ | <span class="id">x</span> <span class="id">s</span>]. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">gssf</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
+ <span class="id">AOF.elim_comp_eq</span> <span class="id">x</span> <span class="id">x</span>. <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.gsings">gsings</a></span>.<br/>
+ <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span> <span class="id">k</span>); <span class="tactic">simpl</span>.<br/>
* <span class="id">AOF.elim_comp_eq</span> <span class="id">x</span> <span class="id">x</span>. <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.gsings">gsings</a></span>.<br/>
* <span class="id">AOF.elim_comp_eq</span> <span class="id">x</span> <span class="id">k</span>. <span class="tactic">apply</span> <span class="id">gss</span>; <span class="tactic">auto</span>.<br/>
* <span class="id">AOF.elim_comp_gt</span> <span class="id">x</span> <span class="id">k</span>. <span class="tactic">apply</span> <span class="id">gssf</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Stringmap.Raw.gso">gso</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">wf</span> <span class="id">m</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">s</span> <span class="id">s</span>', <br/>
&nbsp;&nbsp;<span class="id">s</span>' &lt;&gt; <span class="id">s</span> -&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.get">get</a></span> <span class="id">s</span>' (<span class="tactic">set</span> <span class="id">s</span> <span class="id">v</span> <span class="id">m</span>) = <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.get">get</a></span> <span class="id">s</span>' <span class="id">m</span><br/>
<span class="kwd">with</span> <span class="id"><a name="Stringmap.Raw.gsof">gsof</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wff">wff</a></span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">s</span> <span class="id">v</span> <span class="id">x</span>' <span class="id">s</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#String">String</a></span> <span class="id">x</span>' <span class="id">s</span>' &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#String">String</a></span> <span class="id">x</span> <span class="id">s</span> -&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf">getf</a></span> <span class="id">x</span>' <span class="id">s</span>' (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.setf">setf</a></span> <span class="id">x</span> <span class="id">s</span> <span class="id">v</span> <span class="id">f</span>) = <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf">getf</a></span> <span class="id">x</span>' <span class="id">s</span>' <span class="id">f</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</div>
<div class="proofscript" id="proof46">
- <span class="tactic">destruct</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
+ <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.gsingo">gsingo</a></span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [ | <span class="id">x</span> <span class="id">s</span>]; <span class="tactic">destruct</span> <span class="id">s</span>' <span class="kwd">as</span> [ | <span class="id">x</span>' <span class="id">s</span>']; <span class="tactic">simpl</span>.<br/>
* <span class="tactic">congruence</span>.<br/>
* <span class="tactic">auto</span>.<br/>
* <span class="tactic">auto</span>.<br/>
* <span class="tactic">apply</span> <span class="id">gsof</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> 1; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
+ <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span>' <span class="id">x</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e</span>. <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.gsingo">gsingo</a></span>; <span class="tactic">congruence</span>.<br/>
+ <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span> <span class="id">k</span>); <span class="tactic">simpl</span>.<br/>
* <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span>' <span class="id">x</span>).<br/>
** <span class="id">AOF.elim_comp_lt</span> <span class="id">x</span>' <span class="id">k</span>. <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Tries.CharTrie.html#AO.lt_trans">AO.lt_trans</a></span>; <span class="tactic">eauto</span>.<br/>
** <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e</span>; <span class="tactic">subst</span> <span class="id">x</span>'. <span class="id">AOF.elim_comp_lt</span> <span class="id">x</span> <span class="id">k</span>. <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.gsingo">gsingo</a></span>. <span class="tactic">congruence</span>.<br/>
** <span class="tactic">auto</span>.<br/>
* <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span>' <span class="id">k</span>); <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">gso</span>; <span class="tactic">auto</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e</span>; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e0</span>; <span class="tactic">congruence</span>.<br/>
* <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span>' <span class="id">k</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Stringmap.Raw.grs">grs</a></span>: <span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">wf</span> <span class="id">m</span> -&gt; <span class="kwd">forall</span> <span class="id">s</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.get">get</a></span> <span class="id">s</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.remove">remove</a></span> <span class="id">s</span> <span class="id">m</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
<span class="kwd">with</span> <span class="id"><a name="Stringmap.Raw.grsf">grsf</a></span>: <span class="kwd">forall</span> <span class="id">f</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wff">wff</a></span> <span class="id">f</span> -&gt; <span class="kwd">forall</span> <span class="id">x</span> <span class="id">s</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf">getf</a></span> <span class="id">x</span> <span class="id">s</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.removef">removef</a></span> <span class="id">x</span> <span class="id">s</span> <span class="id">f</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</div>
<div class="proofscript" id="proof47">
- <span class="tactic">destruct</span> 1; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
+ <span class="tactic">auto</span>.<br/>
+ <span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [ | <span class="id">x</span> <span class="id">s</span>]; <span class="tactic">rewrite</span> <span class="id">get_Node</span>'. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">grsf</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> 1; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
+ <span class="tactic">auto</span>.<br/>
+ <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span> <span class="id">k</span>); <span class="tactic">simpl</span>.<br/>
* <span class="id">AOF.elim_comp_lt</span> <span class="id">x</span> <span class="id">k</span>. <span class="tactic">auto</span>.<br/>
* <span class="tactic">rewrite</span> <span class="id">getf_Cons</span>'. <span class="tactic">simpl</span>. <span class="id">AOF.elim_comp_eq</span> <span class="id">x</span> <span class="id">k</span>. <span class="tactic">apply</span> <span class="id">grs</span>; <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wf_remove">wf_remove</a></span>.<br/>
* <span class="id">AOF.elim_comp_gt</span> <span class="id">x</span> <span class="id">k</span>. <span class="tactic">apply</span> <span class="id">grsf</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Stringmap.Raw.gro">gro</a></span>: <span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">wf</span> <span class="id">m</span> -&gt; <span class="kwd">forall</span> <span class="id">s</span> <span class="id">s</span>', <span class="id">s</span>' &lt;&gt; <span class="id">s</span> -&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.get">get</a></span> <span class="id">s</span>' (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.remove">remove</a></span> <span class="id">s</span> <span class="id">m</span>) = <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.get">get</a></span> <span class="id">s</span>' <span class="id">m</span><br/>
<span class="kwd">with</span> <span class="id"><a name="Stringmap.Raw.grof">grof</a></span>: <span class="kwd">forall</span> <span class="id">f</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wff">wff</a></span> <span class="id">f</span> -&gt; <span class="kwd">forall</span> <span class="id">x</span> <span class="id">s</span> <span class="id">x</span>' <span class="id">s</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#String">String</a></span> <span class="id">x</span>' <span class="id">s</span>' &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#String">String</a></span> <span class="id">x</span> <span class="id">s</span> -&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf">getf</a></span> <span class="id">x</span>' <span class="id">s</span>' (<span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.removef">removef</a></span> <span class="id">x</span> <span class="id">s</span> <span class="id">f</span>) = <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.getf">getf</a></span> <span class="id">x</span>' <span class="id">s</span>' <span class="id">f</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</div>
<div class="proofscript" id="proof48">
- <span class="tactic">destruct</span> 1; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
+ <span class="tactic">auto</span>.<br/>
+ <span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [ | <span class="id">x</span> <span class="id">s</span>]; <span class="tactic">destruct</span> <span class="id">s</span>' <span class="kwd">as</span> [ | <span class="id">x</span>' <span class="id">s</span>']; <span class="tactic">subst</span>; <span class="tactic">rewrite</span> <span class="id">get_Node</span>'; <span class="tactic">simpl</span>.<br/>
* <span class="tactic">congruence</span>.<br/>
* <span class="tactic">auto</span>.<br/>
* <span class="tactic">auto</span>.<br/>
* <span class="tactic">apply</span> <span class="id">grof</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> 1; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
+ <span class="tactic">auto</span>.<br/>
+ <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span> <span class="id">k</span>); <span class="tactic">simpl</span>.<br/>
* <span class="tactic">auto</span>.<br/>
* <span class="tactic">rewrite</span> <span class="id">getf_Cons</span>'. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span>' <span class="id">k</span>); <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">gro</span>; <span class="tactic">auto</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e</span>; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e0</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.wf_remove">wf_remove</a></span>.<br/>
* <span class="tactic">destruct</span> (<span class="id"><a href="Tries.CharTrie.html#AO.compare">AO.compare</a></span> <span class="id">x</span>' <span class="id">k</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.STRINGMAP">STRINGMAP</a></span>.<br/>
<br/>
<span class="id">Arguments</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw.tree">tree</a></span>: <span class="tactic">clear</span> <span class="id">implicits</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Raw">Raw</a></span>.<br/>
<br/>
<h2> Wrapping the data type and its well-formedness invariant in a sigma type </h2>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Stringmap.t">t</a></span> (<span class="id">A</span>: <span class="kwd">Type</span>) := { <span class="id">m</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.tree">Raw.tree</a></span> <span class="id">A</span> | <span class="id"><a href="Tries.CharTrie.html#Stringmap.wf">Raw.wf</a></span> <span class="id">m</span> }.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Stringmap.empty">empty</a></span> (<span class="id">A</span>: <span class="kwd">Type</span>) : <span class="id"><a href="Tries.CharTrie.html#Stringmap.t">t</a></span> <span class="id">A</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.Empty">Raw.Empty</a></span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.wf_Empty">Raw.wf_Empty</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Stringmap.get">get</a></span> {<span class="id">A</span>: <span class="kwd">Type</span>} (<span class="id">s</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">m</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.t">t</a></span> <span class="id">A</span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id">A</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Tries.CharTrie.html#Stringmap.get">Raw.get</a></span> <span class="id">s</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">m</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="tactic">set</span> {<span class="id">A</span>: <span class="kwd">Type</span>} (<span class="id">s</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">v</span>: <span class="id">A</span>) (<span class="id">m</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.t">t</a></span> <span class="id">A</span>) : <span class="id"><a href="Tries.CharTrie.html#Stringmap.t">t</a></span> <span class="id">A</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.set">Raw.set</a></span> <span class="id">s</span> <span class="id">v</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">m</span>)) (<span class="id"><a href="Tries.CharTrie.html#Stringmap.wf_set">Raw.wf_set</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">m</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span> <span class="id">m</span>) <span class="id">s</span> <span class="id">v</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Stringmap.remove">remove</a></span> {<span class="id">A</span>: <span class="kwd">Type</span>} (<span class="id">s</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">m</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.t">t</a></span> <span class="id">A</span>) : <span class="id"><a href="Tries.CharTrie.html#Stringmap.t">t</a></span> <span class="id">A</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.remove">Raw.remove</a></span> <span class="id">s</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">m</span>)) (<span class="id"><a href="Tries.CharTrie.html#Stringmap.wf_remove">Raw.wf_remove</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">m</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span> <span class="id">m</span>) <span class="id">s</span>).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Stringmap.gempty">gempty</a></span>: <span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) <span class="id">s</span>, <span class="id"><a href="Tries.CharTrie.html#Stringmap.get">get</a></span> <span class="id">s</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.empty">empty</a></span> <span class="id">A</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</div>
<div class="proofscript" id="proof49">
 <span class="tactic">intros</span>; <span class="tactic">reflexivity</span>. Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Stringmap.gss">gss</a></span>: <span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) <span class="id">s</span> <span class="id">v</span> (<span class="id">m</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.t">t</a></span> <span class="id">A</span>), <span class="id"><a href="Tries.CharTrie.html#Stringmap.get">get</a></span> <span class="id">s</span> (<span class="tactic">set</span> <span class="id">s</span> <span class="id">v</span> <span class="id">m</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</div>
<div class="proofscript" id="proof50">
 <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.gss">Raw.gss</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span>. Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Stringmap.gso">gso</a></span>: <span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) <span class="id">s</span> <span class="id">s</span>' <span class="id">v</span> (<span class="id">m</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.t">t</a></span> <span class="id">A</span>), <span class="id">s</span>' &lt;&gt; <span class="id">s</span> -&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.get">get</a></span> <span class="id">s</span>' (<span class="tactic">set</span> <span class="id">s</span> <span class="id">v</span> <span class="id">m</span>) = <span class="id"><a href="Tries.CharTrie.html#Stringmap.get">get</a></span> <span class="id">s</span>' <span class="id">m</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</div>
<div class="proofscript" id="proof51">
 <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.gso">Raw.gso</a></span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span>. Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Stringmap.gsspec">gsspec</a></span>: <span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) <span class="id">s</span> <span class="id">s</span>' <span class="id">v</span> (<span class="id">m</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.t">t</a></span> <span class="id">A</span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="Tries.CharTrie.html#Stringmap.get">get</a></span> <span class="id">s</span>' (<span class="tactic">set</span> <span class="id">s</span> <span class="id">v</span> <span class="id">m</span>) = <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span> <span class="id">s</span>' <span class="id">s</span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> <span class="kwd">else</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.get">get</a></span> <span class="id">s</span>' <span class="id">m</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</div>
<div class="proofscript" id="proof52">
 <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span> <span class="id">s</span>' <span class="id">s</span>). <span class="tactic">subst</span>; <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.gss">gss</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.gso">gso</a></span>; <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Stringmap.grs">grs</a></span>: <span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) <span class="id">s</span> (<span class="id">m</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.t">t</a></span> <span class="id">A</span>), <span class="id"><a href="Tries.CharTrie.html#Stringmap.get">get</a></span> <span class="id">s</span> (<span class="id"><a href="Tries.CharTrie.html#Stringmap.remove">remove</a></span> <span class="id">s</span> <span class="id">m</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</div>
<div class="proofscript" id="proof53">
 <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.grs">Raw.grs</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span>. Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Stringmap.gro">gro</a></span>: <span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) <span class="id">s</span> <span class="id">s</span>' (<span class="id">m</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.t">t</a></span> <span class="id">A</span>), <span class="id">s</span>' &lt;&gt; <span class="id">s</span> -&gt; <span class="id"><a href="Tries.CharTrie.html#Stringmap.get">get</a></span> <span class="id">s</span>' (<span class="id"><a href="Tries.CharTrie.html#Stringmap.remove">remove</a></span> <span class="id">s</span> <span class="id">m</span>) = <span class="id"><a href="Tries.CharTrie.html#Stringmap.get">get</a></span> <span class="id">s</span>' <span class="id">m</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</div>
<div class="proofscript" id="proof54">
 <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.gro">Raw.gro</a></span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span>. Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Stringmap.grspec">grspec</a></span>: <span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) <span class="id">s</span> <span class="id">s</span>' (<span class="id">m</span>: <span class="id"><a href="Tries.CharTrie.html#Stringmap.t">t</a></span> <span class="id">A</span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="Tries.CharTrie.html#Stringmap.get">get</a></span> <span class="id">s</span>' (<span class="id"><a href="Tries.CharTrie.html#Stringmap.remove">remove</a></span> <span class="id">s</span> <span class="id">m</span>) = <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span> <span class="id">s</span>' <span class="id">s</span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">else</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.get">get</a></span> <span class="id">s</span>' <span class="id">m</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</div>
<div class="proofscript" id="proof55">
 <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span> <span class="id">s</span>' <span class="id">s</span>). <span class="tactic">subst</span>; <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.grs">grs</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap.gro">gro</a></span>; <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Tries.CharTrie.html#Stringmap">Stringmap</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
